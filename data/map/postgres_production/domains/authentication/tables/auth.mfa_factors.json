{
  "table": "mfa_factors",
  "schema": "auth",
  "database": "postgres_production",
  "description": "This table stores multi-factor authentication (MFA) factors within the authentication schema, representing the various authentication methods or devices that users can employ for additional security verification. Based on the table name and database comment indicating it stores \"metadata about factors,\" this table likely maintains configuration and status information for MFA options such as SMS, authenticator apps, or hardware tokens. The table appears to function as a standalone reference for MFA factor definitions, as evidenced by the absence of foreign key relationships, suggesting it may be referenced by other authentication-related tables in the system.",
  "row_count": 0,
  "columns": [
    {
      "name": "id",
      "type": "uuid",
      "nullable": false,
      "description": "Uniquely identifies each multi-factor authentication method configured for user accounts. Serves as the primary reference for tracking and managing individual MFA devices or factors within the authentication system.",
      "default": null
    },
    {
      "name": "user_id",
      "type": "uuid",
      "nullable": false,
      "description": "References the unique identifier of the user account that owns the multi-factor authentication factors configured in this table. Establishes the relationship between MFA settings and individual user accounts in the authentication system.",
      "default": null
    },
    {
      "name": "friendly_name",
      "type": "text",
      "nullable": true,
      "description": "Purpose unclear from available data. Appears to store an optional user-defined label or display name associated with multi-factor authentication factors.",
      "default": null
    },
    {
      "name": "factor_type",
      "type": "USER-DEFINED",
      "nullable": false,
      "description": "Purpose unclear from available data. This appears to store the specific method or technology used for multi-factor authentication within the system's security framework.",
      "default": null
    },
    {
      "name": "status",
      "type": "USER-DEFINED",
      "nullable": false,
      "description": "Purpose unclear from available data. Likely indicates the current state or condition of a multi-factor authentication factor, but specific status values cannot be determined without sample data.",
      "default": null
    },
    {
      "name": "created_at",
      "type": "timestamp with time zone",
      "nullable": false,
      "description": "Records the exact moment when a multi-factor authentication method was first established for a user account. This timestamp is automatically set when the authentication factor is initially configured and cannot be null.",
      "default": null
    },
    {
      "name": "updated_at",
      "type": "timestamp with time zone",
      "nullable": false,
      "description": "Records when the multi-factor authentication factor configuration was last modified. Automatically maintained to track changes to MFA settings for auditing and synchronization purposes.",
      "default": null
    },
    {
      "name": "secret",
      "type": "text",
      "nullable": true,
      "description": "The cryptographic key or seed value used to generate time-based or counter-based one-time passwords for multi-factor authentication. This confidential data enables the validation of authentication codes produced by authenticator applications or hardware tokens.",
      "default": null
    },
    {
      "name": "phone",
      "type": "text",
      "nullable": true,
      "description": "Purpose unclear from available data. This nullable field appears to be intended for storing phone number information related to multi-factor authentication factors.",
      "default": null
    },
    {
      "name": "last_challenged_at",
      "type": "timestamp with time zone",
      "nullable": true,
      "description": "Records the most recent date and time when the multi-factor authentication method was used to verify a user's identity during a login or security challenge. Enables tracking of MFA usage patterns and identifying inactive authentication factors.",
      "default": null
    },
    {
      "name": "web_authn_credential",
      "type": "jsonb",
      "nullable": true,
      "description": "Purpose unclear from available data. Appears to store WebAuthn authentication credential information in JSON format for multi-factor authentication.",
      "default": null
    },
    {
      "name": "web_authn_aaguid",
      "type": "uuid",
      "nullable": true,
      "description": "Purpose unclear from available data. This appears to be related to WebAuthn authentication factors but the specific business meaning cannot be determined without sample values or additional context.",
      "default": null
    },
    {
      "name": "last_webauthn_challenge_data",
      "type": "jsonb",
      "nullable": true,
      "description": "Stores the most recent challenge information used in WebAuthn authentication flows, containing the cryptographic data needed to verify user identity through security keys or biometric devices. This data is temporarily held during the authentication process to validate user responses against the original challenge.",
      "default": null
    }
  ],
  "primary_key": [
    "id"
  ],
  "foreign_keys": [],
  "indexes": [
    {
      "index_name": "factor_id_created_at_idx",
      "index_definition": "CREATE INDEX factor_id_created_at_idx ON auth.mfa_factors USING btree (user_id, created_at)",
      "columns": [
        "user_id",
        "created_at"
      ],
      "is_unique": false
    },
    {
      "index_name": "mfa_factors_last_challenged_at_key",
      "index_definition": "CREATE UNIQUE INDEX mfa_factors_last_challenged_at_key ON auth.mfa_factors USING btree (last_challenged_at)",
      "columns": [
        "last_challenged_at"
      ],
      "is_unique": true
    },
    {
      "index_name": "mfa_factors_pkey",
      "index_definition": "CREATE UNIQUE INDEX mfa_factors_pkey ON auth.mfa_factors USING btree (id)",
      "columns": [
        "id"
      ],
      "is_unique": true
    },
    {
      "index_name": "mfa_factors_user_friendly_name_unique",
      "index_definition": "CREATE UNIQUE INDEX mfa_factors_user_friendly_name_unique ON auth.mfa_factors USING btree (friendly_name, user_id) WHERE (TRIM(BOTH FROM friendly_name) <> ''::text)",
      "columns": [
        "friendly_name",
        "user_id"
      ],
      "is_unique": true
    },
    {
      "index_name": "mfa_factors_user_id_idx",
      "index_definition": "CREATE INDEX mfa_factors_user_id_idx ON auth.mfa_factors USING btree (user_id)",
      "columns": [
        "user_id"
      ],
      "is_unique": false
    },
    {
      "index_name": "unique_phone_factor_per_user",
      "index_definition": "CREATE UNIQUE INDEX unique_phone_factor_per_user ON auth.mfa_factors USING btree (user_id, phone)",
      "columns": [
        "user_id",
        "phone"
      ],
      "is_unique": true
    }
  ],
  "sample_data": [],
  "generated_at": "2025-12-11T22:50:37.851Z"
}